# Opportunity-Cup 2022 - Хакатон от Сбера


* [Front-end](#front)
  * [Решение кейса от команды WIN+NERS](#main)
  * [Возрастная группа риска](#bau)
  * [Подозрительная активность в неактивное время](#btu)
  * [Множество кликов за короткий промежуток времени](#mcu)
  * [Подозрительная активность в ночное время](#ntu)
  * [Невалидный аккаунт](#invalid)
  * [Операции с одного устройства](#one_t)
  * [Dashboard](#map)
* [Back-end](#back)
  * [1. POST /import_transactions](#import)
  * [2. GET /get_transactions](#get_t)
  * [3. GET /get_cities](#get_c)
  * [4. GET /get_transactions_by_ids/$transactions](#get_tbi)
  * [5. GET /set_many_click_delay/$delay](#set_mcd)
  * [6. GET /set_bad_time/$time_from/$time_to](#set_bt)
  * [7. GET /set_night_time/$time_from/$time_to](#set_nt)
  * [8. GET /set_bad_age/$age_from/$age_to](#set_ba)
  * [9. GET /set_equal_delay/$delay](#set_ed)
* [Паттерны](#patterns)
  * [1. Множество кликов](#pat_1)
  * [2. Операции с одного устройства](#pat_2)
  * [3. Подозрительная активность в ночное время](#pat_3)
  * [4. Невалидный аккаунт](#pat_4)
  * [5. Неактивное время](#pat_5)
  * [6. Неподходящий возраст](#pat_6)
* [Инструкции](#instruct)
  * [Установка зависимостей](#libs)
  * [Запуск back-end приложения](#start_back)
  * [Запуск front-end приложения](#start_front)
  
  
  ## <a name="front"></a> Front-end
  ### <a name="main"></a> Решение кейса от команды WIN+NERS
  Страница для загрузки файла с транзакциями в формате `json`.
  
  Показывает все выявленные мошеннические операции.
  ### <a name="bau"></a> Возрастная группа риска
  Страница для просмотра выявленных мошеннических операций по паттерну.
  
  Позволяет настроить возрастную группю группу риск по желанию пользователя.
  ### <a name="btu"></a> Подозрительная активность в неактивное время
  Страница для просмотра выявленных мошеннических операций по паттерну.
  
  Позволяет настроить промежуток времени, который будет считаться подозрительным (неактивным).
  ### <a name="mcu"></a> Множество кликов за короткий промежуток времени
  Страница для просмотра выявленных мошеннических операций по паттерну.
  
  Позволяет настроить промежуток времени для проверки.
  ### <a name="ntu"></a> Подозрительная активность в ночное время
  Страница для просмотра выявленных мошеннических операций по паттерну.
  
  Позволяет настроить промежуток ночного времени для проверки.
  ### <a name="invalid"></a> Невалидный аккаунт
  Страница для просмотра выявленных мошеннических операций по паттерну.
  ### <a name="one_t"></a> Операции с одного устройства
  Страница для просмотра выявленных мошеннических операций по паттерну.
  ### <a name="map"></a> Dashboard
  Страница для просмотра выявленных данных по регионам на карте.
  ## <a name="back"></a> Back-end
  Разработка back-end'а велась с использованием веб-фреймворка Flask (Python)
  ### <a name="import"></a> 1. POST /import_transactions
  Принимает на вход `json` файл или `json` данные с транзакциями.
  
  Возвращает id выявленных мошеннических операция по паттернам.
  
  При невалидных данных возвращает `400`: `{"code": 400,"message": "Validation Failed"}`
  ### <a name="get_t"></a> 2. GET /get_transactions
  Возвращает все транзакции, хранящиеся в базе данных в формате `json`.
  ### <a name="get_c"></a> 3. GET /get_cities
  Возвращает название и координаты городов, которые есть в базе данных в формате `json`.
  ### <a name="get_tbi"></a> 4. GET /get_transactions_by_ids/$transactions
  Принимает строку, в которой через запятую перечислены `id` транзакций.
  
  Возвращает информацию обо всех перечисленных транзакциях в формате `json`.
  ### <a name="set_mcd"></a> 5. GET /set_many_click_delay/$delay
  Принимает минимальное количество минут между транзакциями.
  
  Устанавливает это значение для последующих проверок.
  ### <a name="set_bt"></a> 6. GET /set_bad_time/$time_from/$time_to
  Принимает промежуток времени для проверки.
  
  Устанавливает это значение для паттерна.
  ### <a name="set_nt"></a> 7. GET /set_night_time/$time_from/$time_to
  Принимает промежуток времени ночью для проверки.
  
  Устанваливает это значение для паттерна.
  ### <a name="set_ba"></a> 8. GET /set_bad_age/$age_from/$age_to
  Принимает промежуток возраста для проверки.
  
  Устанавливает это значение для паттерна.
  ### <a name="set_ed"></a> 9. GET /set_equal_delay/$delay
  Принимает минимальное количество секунд между транзакциями.
  
  Устанавливает это значаение для последующих проверок.
  ## <a name="patterns"></a> Паттерны
  ### <a name="pat_1"></a> Множество кликов
  Суть паттерна заключается в выявлении количества кликов за определенный промежуток времени. Это необходимо для выявления мошеннических действий.   Однотипные клики за определенный промежуток времени заставляет задуматься о том, совершаются ли данные операции владельцем данной банковской карты. В ином случае, данная операция может быть отклонена, а карта заблокирована.
  ### <a name="pat_2"></a> Операции с одного устройства
  Суть паттерна заключается в выявлении мошеннических транзакций выполненных за определенный промежуток времени Чтобы это проверить нам необходимо проанализировать каждую транзакцию и и временные промежутки между операциями. В случае есть разница времени между транзакциями повторяется несколько раз, то транзакция мошенническая.
  ### <a name="pat_3"></a> Подозрительная активность в ночное время
  Суть паттерна заключается в выявлении мошеннических транзакций выполненных в ночное время с 23 вечера до 6 утра. Чтобы это проверить нам необходимо проанализировать все транзакции, выполненные в этом временном промежутке. 
  ### <a name="pat_4"></a> Невалидный аккаунт
  
  ### <a name="pat_5"></a> Неактивное время
  Суть паттерна заключается в выявлении мошеннических транзакций выполненных в промежуток 14:30 – 15:30. Чтобы это проверить нам необходимо проанализировать каждую транзакцию, проведенную на данном промежутке. В случае если есть подозрительные операции аккаунт замораживается.
  ### <a name="pat_6"></a> Неподходящий возраст
  Суть паттерна заключается в выявлении мошеннических транзакций выполненных на аккаунтах пожилых людей. Чтобы это проверить нам необходимо проанализировать все транзакции, а найти закономерность, если она есть.
  ## <a name="instruct"></a> Инструкции
  ### <a name="libs"></a> Установка зависимостей
  ##### Устанавливаем `python3-venv`
        sudo apt install python3-venv
  ##### Создаем виртуальное окружение
        python3 -m venv venv
  ##### Переходим в созданное окружение
        source venv/bin/activate
  ##### Устанавливаем необходимые пакеты
        pip install -r requirements.txt
  ### <a name="start_back"></a> Запуск back-end приложения
  ### <a name="start_front"></a> Запуск front-end приложения
